<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create new poll</title>

    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <div class="relative bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6">
        <div
          class="flex justify-between items-center border-b-2 border-gray-100 py-6 md:justify-start md:space-x-10"
        >
          <div class="flex justify-start lg:w-0 lg:flex-1">
            <a href="/">
              <span class="sr-only">Opinion Poll</span>
              <h2>Opinion Poll</h2>
            </a>
          </div>
          <div class="-mr-2 -my-2 md:hidden">
            <button
              type="button"
              class="bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500"
              aria-expanded="false"
            >
              <span class="sr-only">Open menu</span>
              <!-- Heroicon name: outline/menu -->
              <svg
                class="h-6 w-6"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="2"
                stroke="currentColor"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M4 6h16M4 12h16M4 18h16"
                />
              </svg>
            </button>
          </div>
          <nav class="hidden md:flex space-x-10">
            <a
              href="/polls/create"
              class="text-base font-medium text-gray-500 hover:text-gray-900"
            >
              Create new Poll
            </a>
            <a
              href="/polls"
              class="text-base font-medium text-gray-500 hover:text-gray-900"
            >
              All Polls
            </a>
          </nav>
        </div>
      </div>
    </div>

    <div class="conatiner flex justify-center mt-20">
      <div class="card w-[500px] bg-gray-100 rounded-md p-6">
        <h2 class="text-center text-lg">Create Poll</h2>
        <% if (msg) { %>
        <h3 class="text-center text-xl p-4 bg-gray-300"><%= msg %></h3>
        <% } %>
        <div class="form">
          <form action="/polls/create" method="post" class="p-3">
            <div>
              <input
                id="poll-title"
                name="title"
                type="text"
                required
                class="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm mb-4"
                placeholder="Title"
              />
            </div>
            <div>
              <textarea
                required
                name="description"
                id="description"
                class="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm mb-4"
                placeholder="Description"
              ></textarea>
            </div>
            <div id="poll-options">
              <div>
                <input
                  name="options"
                  type="text"
                  required
                  class="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm mb-4"
                  placeholder="Option 1"
                />
              </div>
              <div class="flex space-x-2">
                <input
                  name="options"
                  type="text"
                  required
                  class="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm mb-4"
                  placeholder="Option 2"
                />
              </div>
            </div>
            <div>
              <button
                type="button"
                class="px-6 py-2 bg-blue-500 text-white rounded-md"
                id="addOption"
              >
                Add more option
              </button>
            </div>
            <div class="mt-4 justify-center flex">
              <button
                type="submit"
                class="w-full px-6 py-2 bg-green-500 text-white rounded-md"
              >
                Create Poll
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </body>
  <script>
    let options = document.getElementById('poll-options')
    let addOption = document.getElementById('addOption')
    let currentOptionNumber = 3

    addOption.addEventListener('click', (e) => {
      e.preventDefault
      let option = creatNewOption()
      options.appendChild(option)
    })

    function creatNewOption() {
      let div = document.createElement('div')
      div.className = 'class="flex space-x-2'

      let removeButton = document.createElement('button')
      removeButton.className = 'h-[38px] w-[5%] align-middle'
      removeButton.setAttribute('id', 'removeOption' + currentOptionNumber)
      removeButton.setAttribute('type', 'button')
      removeButton.setAttribute('onclick', 'remove(this)')
      removeButton.innerHTML = `<svg
                    height="30px"
                    id="Layer_1"
                    version="1.1"
                    viewBox="0 0 500 500"
                    width="30px"
                    xml:space="preserve"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                  >
                    <g>
                      <line
                        fill="none"
                        stroke="#130B7A"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-miterlimit="2.6131"
                        stroke-width="10"
                        x1="101.642"
                        x2="120.633"
                        y1="134.309"
                        y2="430.972"
                      />
                      <path
                        d="   M120.633,430.972c0,10.5,8.519,19.031,18.992,19.031"
                        fill="none"
                        stroke="#130B7A"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-miterlimit="2.6131"
                        stroke-width="10"
                      />
                      <line
                        fill="none"
                        stroke="#130B7A"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-miterlimit="2.6131"
                        stroke-width="10"
                        x1="139.625"
                        x2="360.389"
                        y1="450.003"
                        y2="450.003"
                      />
                      <path
                        d="   M360.389,450.003c10.474,0,18.979-8.531,18.979-19.031"
                        fill="none"
                        stroke="#130B7A"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-miterlimit="2.6131"
                        stroke-width="10"
                      />
                      <polyline
                        fill="none"
                        points="   379.367,430.972 398.386,134.309 101.642,134.309  "
                        stroke="#130B7A"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-miterlimit="2.6131"
                        stroke-width="10"
                      />
                      <path
                        d="   M432.779,115.973c0,10.059-8.143,18.215-18.188,18.215"
                        fill="none"
                        stroke="#130B7A"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-miterlimit="2.6131"
                        stroke-width="10"
                      />
                      <line
                        fill="none"
                        stroke="#130B7A"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-miterlimit="2.6131"
                        stroke-width="10"
                        x1="414.592"
                        x2="85.409"
                        y1="134.188"
                        y2="134.188"
                      />
                      <path
                        d="   M85.409,134.188c-10.018,0-18.188-8.156-18.188-18.215"
                        fill="none"
                        stroke="#130B7A"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-miterlimit="2.6131"
                        stroke-width="10"
                      />
                      <path
                        d="   M67.221,115.973c0-10.019,8.17-18.188,18.188-18.188"
                        fill="none"
                        stroke="#130B7A"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-miterlimit="2.6131"
                        stroke-width="10"
                      />
                      <line
                        fill="none"
                        stroke="#130B7A"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-miterlimit="2.6131"
                        stroke-width="10"
                        x1="85.409"
                        x2="414.592"
                        y1="97.784"
                        y2="97.784"
                      />
                      <path
                        d="   M414.592,97.784c10.045,0,18.188,8.17,18.188,18.188"
                        fill="none"
                        stroke="#130B7A"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-miterlimit="2.6131"
                        stroke-width="10"
                      />
                      <line
                        fill="none"
                        stroke="#130B7A"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-miterlimit="2.6131"
                        stroke-width="10"
                        x1="307.364"
                        x2="307.364"
                        y1="97.49"
                        y2="68.988"
                      />
                      <path
                        d="   M307.364,68.988c0-10.474-8.505-18.991-18.965-18.991"
                        fill="none"
                        stroke="#130B7A"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-miterlimit="2.6131"
                        stroke-width="10"
                      />
                      <line
                        fill="none"
                        stroke="#130B7A"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-miterlimit="2.6131"
                        stroke-width="10"
                        x1="288.399"
                        x2="211.628"
                        y1="49.997"
                        y2="49.997"
                      />
                      <path
                        d="   M211.628,49.997c-10.487,0-18.979,8.518-18.979,18.991"
                        fill="none"
                        stroke="#130B7A"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-miterlimit="2.6131"
                        stroke-width="10"
                      />
                      <polyline
                        fill="none"
                        points="   192.649,68.988 192.649,97.49 307.364,97.49  "
                        stroke="#130B7A"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-miterlimit="2.6131"
                        stroke-width="10"
                      />
                      <g>
                        <line
                          fill="none"
                          stroke="#130B7A"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-miterlimit="2.6131"
                          stroke-width="10"
                          x1="166.332"
                          x2="166.332"
                          y1="172.278"
                          y2="406.06"
                        />
                        <line
                          fill="none"
                          stroke="#130B7A"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-miterlimit="2.6131"
                          stroke-width="10"
                          x1="222.102"
                          x2="222.102"
                          y1="172.278"
                          y2="406.06"
                        />
                        <line
                          fill="none"
                          stroke="#130B7A"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-miterlimit="2.6131"
                          stroke-width="10"
                          x1="277.926"
                          x2="277.926"
                          y1="172.278"
                          y2="406.06"
                        />
                        <line
                          fill="none"
                          stroke="#130B7A"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-miterlimit="2.6131"
                          stroke-width="10"
                          x1="333.669"
                          x2="333.669"
                          y1="172.278"
                          y2="406.06"
                        />
                      </g>
                    </g>
                  </svg>`

      let input = document.createElement('input')
      input.type = 'text'
      input.name = 'options'
      input.placeholder = 'Option ' + currentOptionNumber++
      input.className =
        'appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm mb-4 w-[92%] inline-block'
      div.appendChild(input)
      div.appendChild(removeButton)
      return div
    }
    function remove(data) {
      let elementId = data['id']
      let removeE = document.getElementById(elementId)

      removeE.parentNode.parentNode.removeChild(removeE.parentNode)
      //   currentOptionNumber--
    }
  </script>
</html>
